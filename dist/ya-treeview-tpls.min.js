!function(a,b){"use strict";b["true"]=a,angular.module("ya.treeview",[]).factory("YaTreeviewService",function(){var a={},b=function(a,b){return angular.isArray(a[b.childrenKey])||a[b.hasChildrenKey]||!1};return a.children=function(a,b){var c=a.$model[b.childrenKey];if(angular.isFunction(c))return c();if(angular.isArray(c))return c;throw new Error("Children is neither an array nor a function.")},a.nodify=function(c,d,e){var f={$model:c,$parent:d,$hasChildren:b(c,e),collapsed:!e.expanded};if(f.$hasChildren)if(e.expanded){var g=a.children(f,e);f.$children=a.nodifyArray(g,f,e)}else f.$children=[];return f},a.nodifyArray=function(b,c,d){var e=[];return angular.forEach(b,function(b){e.push(a.nodify(b,c,d))}),e},a}).controller("YaTreeviewCtrl",["$scope","$timeout","YaTreeviewService",function(a,b,c){var d=function(a){var b={};return a=a||{},b.childrenKey=a.childrenKey||"children",b.hasChildrenKey=a.hasChildrenKey||"has_children",b.onExpand=a.onExpand||angular.noop,b.onCollapse=a.onCollapse||angular.noop,b.onSelect=a.onSelect||angular.noop,b.onDblClick=a.onDblClick||angular.noop,b.expanded=!!a.expanded,b},e=function(a,d){a.$hasChildren&&b(function(){angular.forEach(a.$children,function(a){if(a.$hasChildren){var b=c.children(a,h);a.$children=d||c.nodifyArray(b,a,h)}})})},f=function(a){var b={};b[h.childrenKey]=a;var d=c.nodify(b,null,h);return d.$children=c.nodifyArray(a,d,h),e(d),d.collapsed=!1,d},g=a.context||{},h=d(a.options);h.expanded=!1,a.node=f(a.model),g.rootNode=a.node,a.toggle=function(b,c){c.collapsed?a.expand(b,c):a.collapse(b,c)},a.expand=function(a,b){e(b),b.collapsed=!1,h.onExpand(a,b,g)},a.collapse=function(a,b){b.collapsed=!0,e(b,[]),angular.forEach(b.$children,function(a){a.collapsed=!0}),h.onCollapse(a,b,g)},a.selectNode=function(a,b){g.selectedNode=b,h.onSelect(a,b,g)},a.dblClick=function(a,b){h.onDblClick(a,b,g)},g.nodify=function(a,b){return c.nodify(a,b,h)},g.nodifyArray=function(a,b){return c.nodifyArray(a,b,h)},g.children=function(a){return c.children(a,h)},a.$watch("model",function(b,c){b!==c&&(a.node=f(b))})}]).directive("yaTreeview",function(){return{restrict:"AE",replace:!0,transclude:!0,controller:"YaTreeviewCtrl",scope:{id:"@yaId",model:"=yaModel",options:"=yaOptions",context:"=yaContext"},templateUrl:"templates/ya-treeview/treeview.tpl.html",compile:function(a,b,c){return function(a,b,d,e){e.transcludeFn=c}}}}).directive("yaNode",["$compile",function(a){return{restrict:"AE",replace:!1,scope:!1,templateUrl:"templates/ya-treeview/children.tpl.html",compile:function(b){var c=b.clone();return b.empty(),function(b,d){b.node.$hasChildren&&d.append(a(c.html())(b))}}}}]).directive("yaTransclude",function(){return{restrict:"AE",replace:!1,require:"^yaTreeview",scope:!1,template:"",link:function(a,b,c,d){d.transcludeFn(a,function(c){a.node&&b.append(c)})}}}),angular.module("ya.treeview.tpls",["templates/ya-treeview/children.tpl.html","templates/ya-treeview/treeview.tpl.html"]),angular.module("templates/ya-treeview/children.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/ya-treeview/children.tpl.html",'<ul ng-hide=node.collapsed class=list-unstyled><li class=node ng-repeat="node in node.$children"><div ng-show=node.$hasChildren><a ng-show=node.collapsed class="btn btn-link pull-left" ng-click="expand($event, node)"><i class="glyphicon glyphicon-chevron-right"></i></a> <a ng-hide=node.collapsed class="btn btn-link pull-left" ng-click="collapse($event, node)"><i class="glyphicon glyphicon-chevron-down"></i></a></div><div class="node-content clearfix" ya-transclude ng-click="selectNode($event, node)" ng-dblclick="dblClick($event, node)"></div><div ya-node class=ya-node></div></li></ul>')}]),angular.module("templates/ya-treeview/treeview.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/ya-treeview/treeview.tpl.html","<div class=ya-treeview><div ya-node class=ya-node></div></div>")}])}({},function(){return this}());